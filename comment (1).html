<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>留言板</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #nameInput, #messageInput { width: 100%; padding: 10px; margin-bottom: 10px; }
    button { padding: 10px 15px; margin-bottom: 20px; }
    .message {
      border-bottom: 1px solid #ccc;
      padding: 8px 0;
    }
    .info {
      font-size: 12px;
      color: gray;
    }
  </style>
</head>
<body>
  <h2>留言板（comment board）</h2>

  <input id="nameInput" placeholder="輸入你的暱稱"><br>
  <textarea id="messageInput" placeholder="寫下你的留言..."></textarea><br>
  <button onclick="addMessage()">送出留言</button>
  <button onclick="clearMessages()">清空留言</button>

  <div id="messageBoard"></div>

  <script>
    // 載入已保存的留言
    window.onload = function() {
      const saved = JSON.parse(localStorage.getItem("messages")) || [];
      saved.forEach(m => displayMessage(m.name, m.text, m.time));
    };

    // 新增留言
    function addMessage() {
      const name = document.getElementById("nameInput").value.trim() || "匿名";
      const input = document.getElementById("messageInput");
      const text = input.value.trim();
      if (text === "") return alert("請輸入留言！");
      
      const time = new Date().toLocaleString();
      displayMessage(name, text, time);

      // 保存到 localStorage
      const saved = JSON.parse(localStorage.getItem("messages")) || [];
      saved.push({ name, text, time });
      localStorage.setItem("messages", JSON.stringify(saved));

      input.value = "";
    }

    // 顯示留言
    function displayMessage(name, text, time) {
      const board = document.getElementById("messageBoard");
      const div = document.createElement("div");
      div.className = "message";
      div.innerHTML = <p><strong>${name}</strong>: ${text}</p><div class="info">${time}</div>;
      board.prepend(div); // 最新留言放最上面
    }

    // 清空留言
    function clearMessages() {
      if (confirm("確定要刪除所有留言嗎？")) {
        localStorage.removeItem("messages");
        document.getElementById("messageBoard").innerHTML = "";
      }
    }
  </script>
</body>
</html>